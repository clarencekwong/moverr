<p id="notice"><%= notice %></p>

<h1>
<% if @job.poster.id == session[:user_id] || (@job.mover && @job.mover.id == session[:user_id]) %>
  Your
<% else %>
  <%= @job.poster.name %>'s
<% end %>
<%= @job.status %> Job
</h1>

<p>
  <strong>Title:</strong>
  <%= @job.title %>
</p>

<p>
  <strong>Date:</strong>
  <%= @job.date.time.strftime("%b %d, %Y at %I:%M%P") %>
</p>

<p>
  <strong>Status:</strong>
  <%= @job.status %>
</p>

<p>
  <strong>Furnitures:</strong>
  <% @job.furnitures.each do |furn| %>
    <%= furn.category %>
  <% end %>
</p>

<% if @job.mover && @job.mover.id != session[:user_id] %>
  <p>
    <strong>Mover:</strong>
      <%= @job.mover.name %> <%= link_to "(profile)", user_path(@job.mover) %>
  </p>
<% elsif @job.mover && @job.mover.id == session[:user_id] %>
<p>
  <strong>Mover:</strong>
    You!
</p>
<% end %>

<% if @job.poster.id != session[:user_id] %>
  <p>
    <strong>Poster:</strong>
      <%= @job.poster.name %> <%= link_to "(profile)", user_path(@job.poster) %>
  </p>
<% elsif @job.poster.id == session[:user_id] %>
<p>
  <strong>Poster:</strong>
    You!
</p>
<% end %>

<% if @job.poster.id == session[:user_id] || (@job.mover && @job.mover.id == session[:user_id]) %>
  <p>
    <strong> Address:</strong>
      <%= @job.poster.address %>
  </p>
<% end %>

<%= link_to 'Edit', edit_job_path(@job) %> |
<%= link_to 'Back', jobs_path %>

<% if @job.poster.id != session[:user_id] && @job.status == 'Pending' %>
  <%= button_to "Accept Job", accept_path(@job), action: 'accept', method: :patch %>
<% end %>

<% if @job.poster.id == session[:user_id] && @job.status == 'Accepted' %>
  <%= button_to "Job Complete", complete_path(@job), action: 'complete', method: :patch %>
<% end %>

<% if @job.poster.id == session[:user_id] || (@job.mover && @job.mover.id == session[:user_id]) && @job.status != "Canceled" %>
  <%= button_to "Cancel Job", cancel_path(@job), action: 'cancel', method: :patch %>
<% end %>

<% if @job.poster.id == session[:user_id] && @job.status == "Canceled" %>
  <%= button_to "Job's Back On", uncancel_path(@job), action: 'uncancel', method: :patch %>
<% end %>
